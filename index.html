<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>malka jurnal</title>
    <meta name="description" content="Portal Malka Jurnal - Akses cepat ke Jurnal Mengajar, Daftar Hadir, dan Rekapitulasi SMKN 1 Plosoklaten.">
    <link rel="icon" href="https://smkn1plosoklaten.sch.id/img/logo-smk.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Merriweather:wght@700&display=swap" rel="stylesheet">
    
    <!-- Memuat Firebase SDK (v9 Compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #D0FFF0;
            background-image: linear-gradient(180deg, #b1fff8 0%, #D0FFF0 100%);
        }
        .font-serif { font-family: 'Merriweather', serif; }

        .shortcut-card {
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 300ms;
            border: 1px solid rgba(0, 0, 0, 0.05);
            outline: 2px solid transparent;
            outline-offset: 2px;
            cursor: pointer;
        }
        
        .shortcut-card:hover {
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25), 0 0 0 0 transparent, 0 0 0 0 transparent, 0 10px 10px -5px var(--tw-shadow-color);
            transform: translateY(-0.25rem);
            --tw-shadow-color: rgb(6 182 212 / 0.3);
            --tw-shadow: var(--tw-shadow-colored);
        }

        @media (min-width: 640px) { .shortcut-card { padding: 1.5rem; } }

        .shortcut-card h3 {
            font-size: 0.875rem; line-height: 1.25rem;
            font-weight: 600; color: rgb(31 41 55); margin-top: 0.75rem;
        }
        
        @media (min-width: 640px) { .shortcut-card h3 { font-size: 1rem; line-height: 1.5rem; } }
        .shortcut-card:hover svg {
            transform: scale(1.05);
            filter: drop-shadow(0 4px 10px rgba(0,180,150,0.3));
        }
        .svg-icon-primary { fill: #0A4D68; }
        .svg-icon-secondary { fill: #D0FFF0; }
        .svg-icon-accent { fill: #FFD700; }

        #main-menu { padding-top: 72px; }
        
        .page-embed {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            z-index: 20; display: flex; flex-direction: column;
            background-image: linear-gradient(180deg, #b1fff8 0%, #D0FFF0 100%);
        }
        .page-embed-header {
            background-image: linear-gradient(to right, rgb(13 148 136), rgb(8 145 178));
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            padding: 1rem; display: flex; justify-content: space-between;
            align-items: center; flex-shrink: 0;
        }
        .page-embed-content {
            display: flex; flex-grow: 1; overflow: auto;
            justify-content: center; align-items: center; padding: 0;
        }
        @media (min-width: 768px) { .page-embed-content:not(.content-full-width) { padding: 1.5rem; } }

        .iframe-9-16-wrapper {
            width: 100%; height: 100%; border: 0;
        }
        @media (min-width: 768px) {
            .iframe-9-16-wrapper {
                width: auto; height: auto; max-width: 24rem; 
                aspect-ratio: 9 / 16; border-radius: 1rem;
                box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
                overflow: hidden; max-height: 90vh;
            }
        }
        .page-embed iframe {
            width: 100%; height: 100%; border-width: 0;
        }
        @media (min-width: 768px) { .iframe-9-16-wrapper iframe { border-radius: 1rem; } }

        @keyframes floatCloud {
          0%, 100% { transform: translateX(0); } 50% { transform: translateX(10px); }
        }
        #cloud1 { animation: floatCloud 8s ease-in-out infinite; }
        #cloud2 { animation: floatCloud 10s ease-in-out infinite 2s; }
        
        @keyframes pulseGlow {
          0%, 100% { filter: drop-shadow(0 0 4px #FFD700); } 50% { filter: drop-shadow(0 0 12px #FFD700); }
        }
        .hero-glow { animation: pulseGlow 4s ease-in-out infinite; }
        
        .text-gradient-gold {
          background-image: linear-gradient(to right, #FFFFFF 0%, #FFD700 50%, #FFFFFF 100%);
          -webkit-background-clip: text; -webkit-text-fill-color: transparent;
          background-clip: text; text-fill-color: transparent;
        }
        
        #loader {
          border: 4px solid #f3f3f3;
          border-top: 4px solid #0A4D68;
          border-radius: 50%;
          width: 40px;
          height: 40px;
          animation: spin 1s linear infinite;
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased text-gray-900">

    <!-- Halaman Login -->
    <div id="login-page" class="flex flex-col items-center justify-center min-h-screen p-4">
        <div class="w-full max-w-sm text-center">
            
            <img src="https://smkn1plosoklaten.sch.id/img/logo-smk.png" alt="Logo SMKN 1 Plosoklaten" class="h-20 w-auto mx-auto mb-4">
            
            <h1 class="text-3xl font-bold font-serif text-gradient-gold" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.2); background-image: linear-gradient(to right, #0A4D68 0%, #086a8b 50%, #0A4D68 100%);">
                MALKA JURNAL
            </h1>
            <p class="text-cyan-800 mt-2 mb-8">Silakan login untuk melanjutkan</p>

            <button id="btn-login" class="w-full bg-white shadow-lg rounded-lg px-6 py-3 flex items-center justify-center transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                <svg class="w-6 h-6 mr-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px"><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/><path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.619-3.317-11.28-7.962l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.088,5.574l6.19,5.238C39.912,35.533,44,29.898,44,24C44,22.659,43.862,21.35,43.611,20.083z"/></svg>
                <span class="font-semibold text-gray-700">Login dengan Google</span>
            </button>
            
            <div id="loader" class="hidden mx-auto mt-8"></div>
        </div>
    </div>

    <!-- Konten Aplikasi Utama (Tersembunyi Awal) -->
    <div id="app-container" class="hidden">

        <!-- Header Utama -->
        <header class="bg-gradient-to-r from-teal-600 to-cyan-700 shadow-lg p-4 fixed top-0 left-0 right-0 z-10">
            <div class="container mx-auto max-w-5xl flex justify-between items-center">
                
                <img src="https://smkn1plosoklaten.sch.id/img/logo-smk.png" alt="Logo SMKN 1 Plosoklaten" class="h-10 w-auto">
                <h1 class="text-xl sm:text-2xl font-bold tracking-wide font-serif text-gradient-gold" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">
                    MALKA JURNAL
                </h1>

                <!-- Info User (Dropdown Sederhana) -->
                <div class="relative group">
                    <img id="user-profile-pic" src="" alt="Foto Profil" class="h-10 w-10 rounded-full cursor-pointer border-2 border-white shadow-md">
                    <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl z-20 overflow-hidden hidden group-hover:block transition-all duration-300 opacity-0 group-hover:opacity-100 transform scale-95 group-hover:scale-100">
                        <div class="p-4">
                            <p class="font-semibold text-gray-800 text-sm">Selamat datang,</p>
                            <p id="user-name" class="font-bold text-gray-900 truncate"></p>
                        </div>
                        <div class="border-t border-gray-100"></div>
                        <button id="btn-sign-out" class="w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-gray-100 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                            </svg>
                            Sign Out
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Menu Utama (Dashboard) -->
        <div id="main-menu">
            <main class="container mx-auto max-w-5xl p-4 sm:p-6">
                <!-- Hero Section -->
                <div class="w-full h-48 sm:h-64 md:h-80 rounded-2xl shadow-inner overflow-hidden relative mb-6" style="background: linear-gradient(135deg, #0A4D68 0%, #086a8b 100%);">
                    <svg class="w-full h-full opacity-80" viewBox="0 0 300 150" preserveAspectRatio="xMidYMid slice">
                        <path id="cloud1" d="M 50 130 Q 40 110 60 110 Q 70 90 90 100 Q 110 90 120 110 Q 140 110 150 130 Z" fill="#FFFFFF" opacity="0.7"/>
                        <path id="cloud2" d="M 180 140 Q 170 120 190 120 Q 200 100 220 110 Q 240 100 250 120 Q 270 120 280 140 Z" fill="#FFFFFF" opacity="0.6"/>
                        <path d="M 70 80 Q 100 70 150 85 Q 200 100 230 80 L 235 95 Q 200 115 150 100 Q 100 85 75 95 Z" fill="#0A4D68" stroke="#000" stroke-width="0.5" opacity="0.8"/>
                        <path d="M 70 80 Q 75 95 80 95 L 225 95 Q 235 95 230 80 Q 200 100 150 85 Q 100 70 70 80 Z" fill="#6b4f34"/>
                        <path d="M 140 55 L 160 55 L 160 85 L 140 85 Z" fill="#FFFFFF"/>
                        <path class="hero-glow" d="M 150 35 Q 130 55 150 55 Q 170 55 150 35 Z" fill="#FFD700"/>
                        <path d="M 155 45 L 165 40 L 165 60 Z" fill="#0A4D68"/>
                        <rect x="145" y="70" width="10" height="15" fill="#8b5a2b"/>
                        <circle cx="100" cy="75" r="8" fill="#D0FFF0"/><circle cx="110" cy="78" r="10" fill="#D0FFF0"/>
                        <circle cx="190" cy="78" r="10" fill="#D0FFF0"/><circle cx="200" cy="75" r="8" fill="#D0FFF0"/>
                    </svg>
                    <div class="absolute inset-0 flex items-start justify-center p-4 pt-4 sm:pt-6">
                        <h2 class="text-white text-lg sm:text-xl font-bold font-serif text-center" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Selamat Datang di MalkaJurnal</h2>
                    </div>
                </div>

                <!-- Grid Tombol Pintasan -->
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 sm:gap-6 relative">
                    <button id="btn-jurnal" class="shortcut-card group bg-white">
                        <svg class="w-16 h-16 sm:w-20 sm:h-20" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                            <path class="svg-icon-primary" d="M14,56V8c0-1.1,0.9-2,2-2h30c1.1,0,2,0.9,2,2v48l-17-10L14,56z" fill="#0A4D68"/>
                            <path d="M18,6h28c1.1,0,2,0.9,2,2v48l-15-9l-15,9V8C16,6.9,16.9,6,18,6z" fill="#FFFFFF" stroke="#0A4D68" stroke-width="1.5"/>
                            <path class="svg-icon-accent" d="M44,18c-8,0-12,8-12,8s-4-8-12-8c-4.4,0-8,3.6-8,8c0,8,12,16,20,24c8-8,20-16,20-24C52,21.6,48.4,18,44,18z" fill="#FFD700" opacity="0.3"/>
                            <path d="M 45 15 C 40 25, 40 35, 42 45 L 38 50 L 40 52 L 44 47 C 45 37, 45 27, 50 17 L 45 15 Z" fill="#D0FFF0" stroke="#0A4D68" stroke-width="1.5" transform="rotate(-15 45 33)"/>
                        </svg>
                        <h3>Jurnal Mengajar</h3>
                    </button>
                    <button id="btn-upacara" class="shortcut-card group bg-cyan-50">
                        <svg class="w-16 h-16 sm:w-20 sm:h-20" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                            <rect class="svg-icon-accent" x="12" y="5" width="4" height="54" rx="2" fill="#FFD700"/>
                            <path d="M16 10 H 48 V 30 L 32 26 L 16 30 Z" fill="#DC2626"/>
                            <path d="M16 30 H 48 V 50 L 32 46 L 16 50 Z" fill="#FFFFFF" stroke="#D1D5DB" stroke-width="0.5"/>
                            <circle class="svg-icon-accent" cx="14" cy="5" r="3" fill="#FFD700"/>
                            <circle class="svg-icon-accent" cx="14" cy="59" r="3" fill="#FFD700"/>
                        </svg>
                        <h3>Daftar Hadir Upacara</h3>
                    </button>
                    <button id="btn-yasin" class="shortcut-card group bg-teal-50">
                        <svg class="w-16 h-16 sm:w-20 sm:h-20" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                            <path d="M 10 55 L 30 35 L 34 35 L 54 55 L 50 58 L 32 39 L 14 58 Z" fill="#8b5a2b"/>
                            <path d="M 30 35 L 10 30 L 12 18 L 32 23 Z" fill="#D0FFF0" stroke="#0A4D68" stroke-width="1.5"/>
                            <path d="M 34 35 L 54 30 L 52 18 L 32 23 Z" fill="#D0FFF0" stroke="#0A4D68" stroke-width="1.5"/>
                            <path class="svg-icon-accent" d="M32 25 l 2 5 h 5 l -4 3 l 2 5 l -5 -3 l -5 3 l 2 -5 l -4 -3 h 5 z" fill="#FFD700"/>
                        </svg>
                        <h3>Yasin Morning</h3>
                    </button>
                    <button id="btn-rekap-jurnal" class="shortcut-card group bg-white">
                        <svg class="w-16 h-16 sm:w-20 sm:h-20" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                            <path d="M 22 55 C 20 50, 20 45, 24 45 L 40 45 C 44 45, 44 50, 42 55 Z" fill="#8b5a2b"/>
                            <circle class="svg-icon-primary" cx="32" cy="30" r="22" fill="#0A4D68" opacity="0.8"/>
                            <circle cx="32" cy="30" r="22" fill="url(#grad)" opacity="0.5"/>
                            <circle cx="28" cy="22" r="4" fill="#FFFFFF" opacity="0.7"/>
                            <rect x="22" y="30" width="4" height="10" fill="#D0FFF0" rx="1"/>
                            <rect x="28" y="25" width="4" height="15" fill="#D0FFF0" rx="1"/>
                            <rect x="34" y="28" width="4" height="12" fill="#D0FFF0" rx="1"/>
                            <rect x="40" y="32" width="4" height="8" fill="#D0FFF0" rx="1"/>
                            <defs><radialGradient id="grad"><stop offset="0%" stop-color="#FFFFFF" stop-opacity="0.3"/><stop offset="100%" stop-color="#FFFFFF" stop-opacity="0"/></radialGradient></defs>
                        </svg>
                        <h3>Rekap Jurnal Guru</h3>
                    </button>
                    <button id="btn-rekap-upacara" class="shortcut-card group bg-cyan-50">
                        <svg class="w-16 h-16 sm:w-20 sm:h-20" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                            <path class="svg-icon-accent" d="M18 10 C 18 20, 14 25, 14 30 V 40 H 50 V 30 C 50 25, 46 20, 46 10 H 18 Z" fill="#FFD700"/>
                            <rect class="svg-icon-accent" x="24" y="40" width="16" height="10" fill="#FFD700"/>
                            <rect class="svg-icon-accent" x="18" y="50" width="28" height="5" rx="2" fill="#FFD700"/>
                            <rect x="20" y="10" width="24" height="5" fill="#fde047"/>
                        </svg>
                        <h3>Rekap Upacara</h3>
                    </button>
                    <button id="btn-rekap-yasin" class="shortcut-card group bg-teal-50">
                        <svg class="w-16 h-16 sm:w-20 sm:h-20" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                            <rect x="14" y="20" width="36" height="30" rx="4" fill="#FFFFFF" stroke="#0A4D68" stroke-width="1.5"/>
                            <rect class="svg-icon-accent" x="10" y="18" width="4" height="34" rx="2" fill="#FFD700"/>
                            <rect class="svg-icon-accent" x="50" y="18" width="4" height="34" rx="2" fill="#FFD700"/>
                            <line x1="20" y1="28" x2="44" y2="28" stroke="#a0aec0" stroke-width="2"/>
                            <line x1="20" y1="34" x2="44" y2="34" stroke="#a0aec0" stroke-width="2"/>
                            <line x1="20" y1="40" x2="38" y2="40" stroke="#a0aec0" stroke-width="2"/>
                            <rect x="20" y="10" width="24" height="10" fill="#f7fafc" stroke="#0A4D68" stroke-width="1.5"/>
                            <rect class="svg-icon-accent" x="18" y="8" width="4" height="14" rx="2" fill="#FFD700"/>
                            <rect class="svg-icon-accent" x="42" y="8" width="4" height="14" rx="2" fill="#FFD700"/>
                        </svg>
                        <h3>Rekap Yasin Morning</h3>
                    </button>
                </div>
            </main>
            <footer class="text-center p-6 mt-10">
                <p class="text-sm text-cyan-800 opacity-75">&copy; 2025 SMKN 1 Plosoklaten. Dibuat dengan <span class="text-red-500">❤️</span></p>
            </footer>
        </div>

        <!-- Halaman-Halaman Embed -->
        <div id="page-jurnal" class="page-embed hidden">
            <div class="page-embed-header">
                <button class="btn-kembali p-2 rounded-full text-white hover:bg-cyan-600 transition-colors" aria-label="Kembali"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                <h2 class="text-lg font-bold text-white">Jurnal Mengajar</h2><div class="w-10"></div>
            </div>
            <div class="page-embed-content"><div class="iframe-9-16-wrapper"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdPCgVx3VYgllWbjy9E2lnJF5ukQ92l0sisODuhuRHV_Hzg6Q/viewform?embedded=true" frameborder="0">Memuat…</iframe></div></div>
        </div>
        <div id="page-upacara" class="page-embed hidden">
            <div class="page-embed-header">
                <button class="btn-kembali p-2 rounded-full text-white hover:bg-cyan-600 transition-colors" aria-label="Kembali"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                <h2 class="text-lg font-bold text-white">Daftar Hadir Upacara</h2><div class="w-10"></div>
            </div>
            <div class="page-embed-content"><div class="iframe-9-16-wrapper"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLScckW2GX_bx50DRKZFLja0VNxXelKx2QhevtFqE9ZGGyBKCqg/viewform?embedded=true" frameborder="0">Memuat…</iframe></div></div>
        </div>
        <div id="page-yasin" class="page-embed hidden">
            <div class="page-embed-header">
                <button class="btn-kembali p-2 rounded-full text-white hover:bg-cyan-600 transition-colors" aria-label="Kembali"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                <h2 class="text-lg font-bold text-white">Yasin Morning</h2><div class="w-10"></div>
            </div>
            <div class="page-embed-content"><div class="iframe-9-16-wrapper"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSddRWmO1Belgu6nNqNp4CcLjDLgywEsTyecLzIt0WgeSFSuKQ/viewform?embedded=true" frameborder="0">Memuat…</iframe></div></div>
        </div>
        <div id="page-rekap-jurnal" class="page-embed hidden">
            <div class="page-embed-header">
                <button class="btn-kembali p-2 rounded-full text-white hover:bg-cyan-600 transition-colors" aria-label="Kembali"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                <h2 class="text-lg font-bold text-white">Rekap Jurnal Guru</h2><div class="w-10"></div>
            </div>
            <div class="page-embed-content content-full-width"><iframe src="https://lookerstudio.google.com/embed/reporting/5229a8e6-7d59-458e-bf46-5e45250633f8/page/xzTXF" frameborder="0" style="border:0" allowfullscreen></iframe></div>
        </div>
        <div id="page-rekap-upacara" class="page-embed hidden">
            <div class="page-embed-header">
                <button class="btn-kembali p-2 rounded-full text-white hover:bg-cyan-600 transition-colors" aria-label="Kembali"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                <h2 class="text-lg font-bold text-white">Rekap Upacara</h2><div class="w-10"></div>
            </div>
            <div class="page-embed-content content-full-width"><iframe src="https://lookerstudio.google.com/embed/reporting/5e9c4b94-7aae-4b28-8c89-60be95eec6c4/page/xLkfF" frameborder="0" style="border:0" allowfullscreen></iframe></div>
        </div>
        <div id="page-rekap-yasin" class="page-embed hidden">
            <div class="page-embed-header">
                <button class="btn-kembali p-2 rounded-full text-white hover:bg-cyan-600 transition-colors" aria-label="Kembali"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                <h2 class="text-lg font-bold text-white">Rekap Yasin Morning</h2><div class="w-10"></div>
            </div>
            <div class="page-embed-content content-full-width"><iframe src="https://lookerstudio.google.com/u/0/reporting/9e33f38f-ee8d-429d-9e4c-176af3a520af" frameborder="0" style="border:0" allowfullscreen></iframe></div>
        </div>

    </div> <!-- Akhir dari #app-container -->


    <!-- Skrip Firebase & Navigasi -->
    <script>
        // == Konfigurasi Firebase ==
        const firebaseConfig = {
          apiKey: "AIzaSyCnwDpcZnAn_DzbA6l0ACrAGmyaDzguLEQ",
          authDomain: "malka-jurnal.firebaseapp.com",
          projectId: "malka-jurnal",
          storageBucket: "malka-jurnal.firebasestorage.app",
          messagingSenderId: "801975799432",
          appId: "1:801975799432:web:bd7babdb91ebf36286193d",
          measurementId: "G-KRGW0JVXYX"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const provider = new firebase.auth.GoogleAuthProvider();

        // == Referensi Elemen DOM ==
        const loginPage = document.getElementById('login-page');
        const appContainer = document.getElementById('app-container');
        const btnLogin = document.getElementById('btn-login');
        const btnSignOut = document.getElementById('btn-sign-out');
        const userProfilePic = document.getElementById('user-profile-pic');
        const userName = document.getElementById('user-name');
        const loader = document.getElementById('loader');
        const mainMenu = document.getElementById('main-menu');
        
        const pageMap = {
            'btn-jurnal': 'page-jurnal',
            'btn-upacara': 'page-upacara',
            'btn-yasin': 'page-yasin',
            'btn-rekap-jurnal': 'page-rekap-jurnal',
            'btn-rekap-upacara': 'page-rekap-upacara',
            'btn-rekap-yasin': 'page-rekap-yasin'
        };

        // == Logika Autentikasi ==

        // 1. Tampilkan loader saat halaman dimuat
        loader.classList.remove('hidden');
        btnLogin.classList.add('hidden');

        // 2. "Tangkap" hasil redirect login
        auth.getRedirectResult()
            .then((result) => {
                // Fungsi ini akan dijalankan. Jika 'result.user' ada,
                // onAuthStateChanged akan segera dipanggil dengan data user.
                // Jika tidak, onAuthStateChanged akan dipanggil dengan 'null'.
            })
            .catch((error) => {
                console.error("Error saat getRedirectResult:", error.message);
                alert("Gagal memproses login: " + error.message);
                // Jika gagal, tampilkan tombol login lagi
                loader.classList.add('hidden');
                btnLogin.classList.remove('hidden');
            });

        // 3. Penjaga Gerbang (Auth State Listener)
        auth.onAuthStateChanged((user) => {
            if (user) {
                // Pengguna SUDAH login
                appContainer.classList.remove('hidden');
                loginPage.classList.add('hidden');
                
                userProfilePic.src = user.photoURL || 'https://via.placeholder.com/40';
                userName.textContent = user.displayName || 'Pengguna';
                
            } else {
                // Pengguna BELUM login
                appContainer.classList.add('hidden');
                loginPage.classList.remove('hidden');
                
                loader.classList.add('hidden');
                btnLogin.classList.remove('hidden');
            }
        });

        // 4. Tombol Login (Aksi Klik)
        btnLogin.addEventListener('click', () => {
            loader.classList.remove('hidden');
            btnLogin.classList.add('hidden');
            auth.signInWithRedirect(provider);
        });

        // 5. Tombol Logout
        btnSignOut.addEventListener('click', () => {
            auth.signOut().catch((error) => {
                console.error("Error saat logout:", error);
            });
        });

        // == Logika Navigasi Aplikasi ==
        
        function showPage(pageId) {
            mainMenu.classList.add('hidden');
            document.querySelectorAll('.page-embed').forEach(page => {
                page.classList.add('hidden');
            });
            const pageToShow = document.getElementById(pageId);
            if (pageToShow) {
                pageToShow.classList.remove('hidden');
                window.scrollTo(0, 0);
            }
        }

        function showMainMenu() {
            mainMenu.classList.remove('hidden');
            document.querySelectorAll('.page-embed').forEach(page => {
                page.classList.add('hidden');
            });
        }

        Object.keys(pageMap).forEach(buttonId => {
            const button = document.getElementById(buttonId);
            if (button) {
                button.addEventListener('click', () => {
                    showPage(pageMap[buttonId]);
                });
            }
        });

        document.querySelectorAll('.btn-kembali').forEach(button => {
            button.addEventListener('click', () => {
                const parentPage = button.closest('.page-embed');
                const iframe = parentPage.querySelector('iframe');
                if (iframe) {
                    const src = iframe.src;
                    iframe.src = null;
                    iframe.src = src; 
                }
                showMainMenu();
            });
        });
    </script>

</body>
</html>


