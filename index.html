<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malka Jurnal</title>
    <meta name="description" content="Portal Malka Jurnal - Akses cepat ke Jurnal Mengajar, Daftar Hadir, dan Rekapitulasi SMKN 1 Plosoklaten.">
    <link rel="icon" href="https://smkn1plosoklaten.sch.id/img/logo-smk.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Merriweather:wght@700&display=swap" rel="stylesheet">
    
    <!-- SDK Firebase (Diperlukan untuk Autentikasi) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #D0FFF0;
            background-image: linear-gradient(180deg, #b1fff8 0%, #D0FFF0 100%);
        }
        .font-serif { font-family: 'Merriweather', serif; }

        .shortcut-card {
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 300ms;
            border: 1px solid rgba(0, 0, 0, 0.05);
            outline: 2px solid transparent;
            outline-offset: 2px;
            cursor: pointer;
        }
        
        .shortcut-card:hover {
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25), 0 0 0 0 transparent, 0 0 0 0 transparent, 0 10px 10px -5px var(--tw-shadow-color);
            transform: translateY(-0.25rem);
            --tw-shadow-color: rgb(6 182 212 / 0.3);
            --tw-shadow: var(--tw-shadow-colored);
        }

        @media (min-width: 640px) { .shortcut-card { padding: 1.5rem; } }

        .shortcut-card h3 {
            font-size: 0.875rem; line-height: 1.25rem;
            font-weight: 600; color: rgb(31 41 55); margin-top: 0.75rem;
        }

        #main-menu { padding-top: 72px; }
        
        .page-embed {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 20;
            display: flex;
            flex-direction: column;
            background-image: linear-gradient(180deg, #b1fff8 0%, #D0FFF0 100%);
        }

        .page-embed-header {
            background-image: linear-gradient(to right, rgb(13 148 136), rgb(8 145 178));
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        .page-embed-content {
            display: flex;
            flex-grow: 1;
            overflow: auto;
            justify-content: center;
            align-items: center;
            padding: 0;
        }

        .iframe-9-16-wrapper {
            width: 100%;
            height: 100%;
            border: 0;
        }

        .page-embed iframe {
            width: 100%;
            height: 100%;
            border-width: 0;
        }
    </style>
</head>
<body class="antialiased text-gray-900">

    <!-- Halaman Login -->
    <div id="login-page" class="fixed inset-0 z-50 flex flex-col items-center justify-center p-8">
        <div class="bg-white/70 backdrop-blur-md p-8 sm:p-12 rounded-2xl shadow-2xl text-center max-w-sm w-full">
            <img src="https://smkn1plosoklaten.sch.id/img/logo-smk.png" alt="Logo SMKN 1 Plosoklaten" class="h-20 w-auto mx-auto mb-4">
            <h1 class="text-2xl sm:text-3xl font-bold tracking-wide font-serif text-gradient-gold mb-2">MALKA JURNAL</h1>
            <p class="text-gray-600 mb-8">Silakan login untuk melanjutkan.</p>

            <button id="btn-google-login" class="w-full bg-white text-gray-700 font-semibold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-3 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2">
                <svg class="w-6 h-6" viewBox="0 0 48 48">
                    <path fill="#4285F4" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path>
                    <path fill="#34A853" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v8.51h12.8c-.57 2.73-2.24 5.08-4.79 6.69l7.98 6.19c4.63-4.26 7.27-10.3 7.27-17.01z"></path>
                    <path fill="#FBBC05" d="M10.53 28.59c-.49-1.45-.78-2.99-.78-4.59s.29-3.14.78-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path>
                    <path fill="#EA4335" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.98-6.19c-2.11 1.43-4.79 2.2-7.91 2.2-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path>
                </svg>
                <span>Sign in with Google</span>
            </button>
            <p id="login-error" class="text-red-500 text-sm mt-4"></p>
        </div>
    </div>

    <!-- Konten Aplikasi Utama -->
    <div id="app-container" class="hidden">
        <!-- Header Utama -->
        <header class="bg-gradient-to-r from-teal-600 to-cyan-700 shadow-lg p-4 fixed top-0 left-0 right-0 z-10">
            <div class="container mx-auto max-w-5xl flex justify-between items-center">
                <img src="https://smkn1plosoklaten.sch.id/img/logo-smk.png" alt="Logo SMKN 1 Plosoklaten" class="h-10 w-auto">
                <h1 class="text-xl sm:text-2xl font-bold tracking-wide font-serif text-gradient-gold">MALKA JURNAL</h1>
                <div class="flex items-center space-x-3">
                    <img id="user-photo" src="" alt="Foto Profil" class="h-10 w-10 rounded-full border-2 border-white/50 object-cover">
                    <button id="btn-sign-out" class="text-white text-sm font-semibold bg-red-500/80 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors">
                        Sign Out
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Menu -->
        <div id="main-menu">
            <main class="container mx-auto max-w-5xl p-4 sm:p-6">
                <div class="w-full h-48 sm:h-64 md:h-80 rounded-2xl shadow-inner overflow-hidden relative mb-6" style="background: linear-gradient(135deg, #0A4D68 0%, #086a8b 100%);">
                    <svg class="w-full h-full opacity-80" viewBox="0 0 300 150" preserveAspectRatio="xMidYMid slice">
                        <!-- SVG content here -->
                    </svg>
                    <div class="absolute inset-0 flex items-start justify-center p-4 pt-4 sm:pt-6">
                        <h2 class="text-white text-lg sm:text-xl font-bold font-serif text-center">Selamat Datang di MalkaJurnal</h2>
                    </div>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 sm:gap-6 relative">
                    <button id="btn-jurnal" class="shortcut-card group bg-white">
                        <svg class="w-16 h-16 sm:w-20 sm:h-20" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                            <!-- SVG for Jurnal Mengajar -->
                        </svg>
                        <h3>Jurnal Mengajar</h3>
                    </button>
                    <!-- Other buttons here -->
                </div>
            </main>
        </div>
    </div>

    <!-- Skrip Firebase dan Logika Aplikasi -->
    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const provider = new firebase.auth.GoogleAuthProvider();

        const loginPage = document.getElementById('login-page');
        const appContainer = document.getElementById('app-container');
        const btnGoogleLogin = document.getElementById('btn-google-login');
        const btnSignOut = document.getElementById('btn-sign-out');
        const userPhoto = document.getElementById('user-photo');
        const loginError = document.getElementById('login-error');
        const mainMenu = document.getElementById('main-menu');

        auth.setPersistence(firebase.auth.Auth.Persistence.NONE)
            .then(() => {
                auth.onAuthStateChanged(user => {
                    if (user) {
                        appContainer.classList.remove('hidden');
                        loginPage.classList.add('hidden');
                        userPhoto.src = user.photoURL || 'https://placehold.co/40x40/FFFFFF/333333?text=?';
                        showMainMenu();
                    } else {
                        appContainer.classList.add('hidden');
                        loginPage.classList.remove('hidden');
                        userPhoto.src = '';
                        document.querySelectorAll('.page-embed').forEach(page => {
                            page.classList.add('hidden');
                        });
                    }
                });

                btnGoogleLogin.addEventListener('click', () => {
                    loginError.textContent = '';
                    auth.signInWithPopup(provider)
                        .then(result => {
                            console.log("Login berhasil:", result.user);
                        })
                        .catch(error => {
                            console.error("Error saat signInWithPopup:", error);
                            loginError.textContent = "Gagal login: " + error.message;
                        });
                });

                btnSignOut.addEventListener('click', () => {
                    auth.signOut();
                });
            })
            .catch(error => {
                loginError.textContent = "Error kritis: " + error.message;
            });

        function showPage(pageId) {
            mainMenu.classList.add('hidden');
            document.querySelectorAll('.page-embed').forEach(page => {
                page.classList.add('hidden');
            });
            const pageToShow = document.getElementById(pageId);
            if (pageToShow) {
                pageToShow.classList.remove('hidden');
                window.scrollTo(0, 0);
            }
        }

        function showMainMenu() {
            mainMenu.classList.remove('hidden');
            document.querySelectorAll('.page-embed').forEach(page => {
                page.classList.add('hidden');
            });
        }

        const pageMap = {
            'btn-jurnal': 'page-jurnal',
            // Other page mappings here
        };

        Object.keys(pageMap).forEach(buttonId => {
            const button = document.getElementById(buttonId);
            if (button) {
                button.addEventListener('click', () => {
                    showPage(pageMap[buttonId]);
                });
            }
        });

        document.querySelectorAll('.btn-kembali').forEach(button => {
            button.addEventListener('click', () => {
                const parentPage = button.closest('.page-embed');
                const iframe = parentPage.querySelector('iframe');
                if (iframe) {
                    const src = iframe.src;
                    iframe.src = null;
                    iframe.src = src;
                }
                showMainMenu();
            });
        });
    </script>

</body>
</html>
